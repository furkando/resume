{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nimport Modal1 from \"react-modal\";\nimport { Contexto } from \"../appContext\";\nimport { useState, useContext } from \"react\";\nimport styles from \"../styles/modal.module.css\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faTimes } from \"@fortawesome/free-solid-svg-icons\";\nimport { timeout } from \"./helpers\";\nimport emailjs from \"emailjs-com\";\nimport { buttonDisabled } from \"../styles/spinningWheel.module.css\";\nimport SpinningWheel from \"../components/spinningWheel\";\nexport default function Modal() {\n  var _useContext = useContext(Contexto),\n      modalIsOpen = _useContext.modalIsOpen,\n      setIsOpen = _useContext.setIsOpen;\n\n  var _useState = useState(\"\"),\n      submitMessage = _useState[0],\n      setSubmitMessage = _useState[1];\n\n  var _useState2 = useState(true),\n      allowSend = _useState2[0],\n      setAllowSend = _useState2[1];\n\n  var _useState3 = useState({\n    userName: \"\",\n    userEmail: \"\",\n    userPhoneNumber: \"\",\n    userMessage: \"\"\n  }),\n      form = _useState3[0],\n      setForm = _useState3[1];\n\n  var handleForm = function handleForm(event) {\n    setForm(_objectSpread(_objectSpread({}, form), {}, _defineProperty({}, event.target.id, typeof event.target.value === \"string\" ? event.target.value : JSON.stringify(event.target.value))));\n  };\n\n  var closeModal = function closeModal() {\n    setIsOpen(false);\n  };\n\n  var submitForm = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(e) {\n      var emailjsObj, result;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              e.preventDefault();\n              emailjsObj = {\n                serviceId: \"gmail\",\n                templateId: \"template_aRfTvlUy\",\n                userId: process.env.NEXT_PUBLIC_USER_ID\n              };\n              _context.prev = 2;\n\n              if (!allowSend) {\n                _context.next = 17;\n                break;\n              }\n\n              setAllowSend(function () {\n                return false;\n              });\n              _context.next = 7;\n              return emailjs.send(emailjsObj.serviceId, emailjsObj.templateId, form, emailjsObj.userId);\n\n            case 7:\n              result = _context.sent;\n\n              if (result.status == 200) {\n                setSubmitMessage(function () {\n                  return \"Arigato!\";\n                });\n              } else {\n                setSubmitMessage(function () {\n                  return \"Something unexpected happened!\";\n                });\n              }\n\n              console.log(\"result:\", result);\n              _context.next = 12;\n              return timeout(2);\n\n            case 12:\n              closeModal();\n              setSubmitMessage(function () {\n                return \"\";\n              });\n              _context.next = 16;\n              return timeout(0.5);\n\n            case 16:\n              setAllowSend(function () {\n                return true;\n              });\n\n            case 17:\n              _context.next = 33;\n              break;\n\n            case 19:\n              _context.prev = 19;\n              _context.t0 = _context[\"catch\"](2);\n              console.error(_context.t0);\n\n              if (!allowSend) {\n                _context.next = 33;\n                break;\n              }\n\n              setAllowSend(function () {\n                return false;\n              });\n              console.error(_context.t0);\n              setSubmitMessage(function () {\n                return \"Something unexpected happened!\";\n              });\n              _context.next = 28;\n              return timeout(2);\n\n            case 28:\n              closeModal();\n              setSubmitMessage(function () {\n                return \"\";\n              });\n              _context.next = 32;\n              return timeout(0.5);\n\n            case 32:\n              setAllowSend(function () {\n                return true;\n              });\n\n            case 33:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[2, 19]]);\n    }));\n\n    return function submitForm(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  return __jsx(Modal1, {\n    isOpen: modalIsOpen,\n    onRequestClose: closeModal,\n    contentLabel: \"Email Modal\",\n    closeTimeoutMS: 500,\n    className: {\n      base: \"\".concat(styles.baseContent),\n      afterOpen: \"\".concat(styles.afterOpenContent),\n      beforeClose: \"\".concat(styles.beforeCloseContent)\n    },\n    overlayClassName: {\n      base: \"\".concat(styles.baseOverlay),\n      afterOpen: \"\".concat(styles.afterOpenOverlay),\n      beforeClose: \"\".concat(styles.beforeCloseOverlay)\n    }\n  }, __jsx(\"h1\", null, \"Thank you for your time\", \" \", __jsx(\"span\", {\n    \"aria-label\": \"Hi there\",\n    role: \"img\"\n  }, \"\\u270C\")), __jsx(\"h2\", null, \"Please fill this form, and I'll be in touch with you\"), __jsx(\"form\", {\n    onSubmit: submitForm\n  }, __jsx(\"ul\", null, __jsx(\"li\", null, __jsx(\"label\", {\n    htmlFor: \"name\"\n  }, \"Name:\")), __jsx(\"li\", null, __jsx(\"input\", {\n    type: \"text\",\n    id: \"userName\",\n    name: \"name\",\n    onChange: handleForm,\n    required: true\n  }))), __jsx(\"ul\", null, __jsx(\"li\", null, __jsx(\"label\", {\n    htmlFor: \"email\"\n  }, \"Email:\")), __jsx(\"li\", null, __jsx(\"input\", {\n    type: \"text\",\n    id: \"userEmail\",\n    name: \"email\",\n    onChange: handleForm,\n    required: true\n  }))), __jsx(\"ul\", null, __jsx(\"li\", null, __jsx(\"label\", {\n    htmlFor: \"number\"\n  }, \"Phone Number\")), __jsx(\"li\", null, __jsx(\"input\", {\n    type: \"text\",\n    id: \"userPhoneNumber\",\n    name: \"phoneNumber\",\n    onChange: handleForm\n  }))), __jsx(\"ul\", null, __jsx(\"li\", null, __jsx(\"label\", {\n    htmlFor: \"message\"\n  }, \"Your message:\")), __jsx(\"li\", null, __jsx(\"textarea\", {\n    type: \"text\",\n    id: \"userMessage\",\n    name: \"message\",\n    onChange: handleForm,\n    required: true\n  }))), __jsx(\"div\", null, __jsx(\"div\", null, __jsx(\"button\", {\n    disabled: allowSend ? false : true,\n    type: \"submit\",\n    className: allowSend ? \"\".concat(styles.submitButton) : \"\".concat(styles.submitButton, \" \").concat(buttonDisabled)\n  }, allowSend ? \"SUBMIT\" : __jsx(SpinningWheel, null)), __jsx(\"span\", null, submitMessage)))), __jsx(\"div\", {\n    onClick: closeModal,\n    className: \"\".concat(styles.cross)\n  }, __jsx(FontAwesomeIcon, {\n    color: \"rgba(34, 34, 34, 0.9)\",\n    icon: faTimes\n  }), \" \"));\n}","map":null,"metadata":{},"sourceType":"module"}